"use strict";(globalThis.webpackChunkrs_clone=globalThis.webpackChunkrs_clone||[]).push([[858],{7238:(e,a,n)=>{n.d(a,{Z:()=>r});var t=n(7294),i=n(9655);const r=function(e){var a=e.user,n=a.username,r=a.fullName,o=a.avatarData,c=(null==o?void 0:o.avatarSrc)||"./images/icons/profile.jpg";return t.createElement("div",null,t.createElement(i.rU,{style:{display:"flex",alignItems:"center",gap:"10px",padding:0,margin:"10px 0"},to:"/".concat(n)},t.createElement("img",{src:c,width:"53",height:"53",style:{borderRadius:"50%"}}),t.createElement("span",null,n),t.createElement("span",null,"(",r,")")))}},5858:(e,a,n)=>{n.d(a,{Z:()=>k});var t=n(885),i=n(7294),r=n(9655),o=n(5500),c=n(5732),l=n(8013),s=n(5794),m=n(3611);function d(){var e=(0,i.useContext)(l.Z).user,a=(0,i.useState)(!1),n=(0,t.Z)(a,2),r=n[0],o=n[1],c=(0,i.useState)(""),d=(0,t.Z)(c,2),u=d[0],p=d[1];return i.createElement(i.Fragment,null,i.createElement("a",{className:r?"main-nav__link main-nav__link--create main-nav__link--active":"main-nav__link main-nav__link--create",onClick:function(){return o(!0)}},i.createElement("span",{className:"main-nav__text"},"Create")),r?i.createElement(m.Z,{setCaption:p,setShowModal:o,callback:function(a,n){(0,s.Fe)(n,a,e.uid,u),o(!1),p("")},type:"photos"}):null)}var u=n(6297),p=n(3379),v=n.n(p),_=n(9080);v()(_.Z,{insert:"head",singleton:!1}),_.Z.locals;var g=n(7238),f=n(2761);function h(e){return i.createElement("div",{className:"search-block"},i.createElement("input",{className:"search-block__field field field--search",type:"text",placeholder:"Search",value:e.value,onChange:e.handleChange}),i.createElement("button",{className:"search-block__clean",onClick:e.clearInput},"x"))}v()(f.Z,{insert:"head",singleton:!1}),f.Z.locals;var b=n(3470);v()(b.Z,{insert:"head",singleton:!1}),b.Z.locals;const x=function(){var e=(0,i.useState)(""),a=(0,t.Z)(e,2),n=a[0],r=a[1],o=(0,i.useState)([]),c=(0,t.Z)(o,2),l=c[0],m=c[1],d=(0,i.useState)([]),u=(0,t.Z)(d,2),p=u[0],v=u[1],_=(0,i.useState)("success"),f=(0,t.Z)(_,2),b=f[0],x=f[1];return(0,i.useEffect)((function(){x("loading"),(0,s.ah)().then((function(e){x("success"),m(e)})).catch((function(e){x("error")}))}),[]),(0,i.useEffect)((function(){v(function(e,a){return a?e.filter((function(e){return e.username.toUpperCase().includes(a.toUpperCase())||e.fullName.toUpperCase().includes(a.toUpperCase())})):[]}(l,n))}),[n]),i.createElement("div",{className:"search"},i.createElement("header",{className:"search__header"},i.createElement("h2",{className:"title"},"Search"),i.createElement(h,{value:n,handleChange:function(e){var a=e.target.value;r(a)},clearInput:function(){r("")}})),i.createElement("div",{className:"search__inner"},"success"===b&&i.createElement("ul",null,p.map((function(e,a){return i.createElement("li",{key:a},i.createElement(g.Z,{key:e.userId,user:e}))}))),"loading"===b&&i.createElement("div",null,"loading"),"error"===b&&i.createElement("div",null,"WTF?")))};function k(e){var a,n=e.isMainPage,s=null===(a=(0,i.useContext)(c.Z))||void 0===a?void 0:a.firebase,m=(0,i.useState)(!1),p=(0,t.Z)(m,2),v=p[0],_=p[1],g=(0,i.useContext)(l.Z).user;return i.createElement("nav",{className:v?"main-nav main-nav--compact":"main-nav"},i.createElement(r.rU,{className:"main-nav__logo",to:u.h1},i.createElement("img",{className:"main-nav__image",src:"./images/logo.png",alt:"Instagram logo",width:"103",height:"29"})),i.createElement("ul",{className:"main-nav__inner"},i.createElement("li",{className:"main-nav__item"},i.createElement(r.rU,{className:n?"main-nav__link main-nav__link--home main-nav__link--active":"main-nav__link main-nav__link--home",to:u.h1},i.createElement("span",{className:"main-nav__text"},"Home"))),i.createElement("li",{className:"main-nav__item main-nav__item--search"},i.createElement("a",{className:v?"main-nav__link main-nav__link--search main-nav__link--active":"main-nav__link main-nav__link--search",onClick:function(){_(!v)}},i.createElement("span",{className:"main-nav__text"},"Search"))),i.createElement("li",{className:"main-nav__item"},i.createElement("a",{className:"main-nav__link main-nav__link--explore",href:"#"},i.createElement("span",{className:"main-nav__text"},"Explore"))),i.createElement("li",{className:"main-nav__item"},i.createElement("a",{className:"main-nav__link main-nav__link--reels",href:"#"},i.createElement("span",{className:"main-nav__text"},"Reels"))),i.createElement("li",{className:"main-nav__item"},i.createElement("a",{className:"main-nav__link main-nav__link--messages",href:"#"},i.createElement("span",{className:"main-nav__text"},"Messages"))),i.createElement("li",{className:"main-nav__item"},i.createElement("a",{className:"main-nav__link main-nav__link--notifications",href:"#"},i.createElement("span",{className:"main-nav__text"},"Notifications"))),i.createElement("li",{className:"main-nav__item"},i.createElement(d,null)),i.createElement("li",{className:"main-nav__item"},g?i.createElement(r.rU,{className:n?"main-nav__link main-nav__link--profile ":"main-nav__link main-nav__link--profile main-nav__link--active",to:"/".concat(g.displayName)},i.createElement("span",{className:"main-nav__text"},"Profile")):null),i.createElement("li",{className:"main-nav__item main-nav__item--logout"},i.createElement("a",{className:"main-nav__link main-nav__link--signout",type:"button",onClick:function(){return(0,o.w7)((0,o.v0)(s))}},i.createElement("span",{className:"main-nav__text"},"Sign Out")))),v&&i.createElement(x,null))}},3611:(e,a,n)=>{n.d(a,{Z:()=>s});var t=n(885),i=n(7294),r=n(807),o=n(3379),c=n.n(o),l=n(509);function s(e){var a=e.callback,n=e.type,o=e.setShowModal,c=e.setCaption,l=(0,i.useState)(null),s=(0,t.Z)(l,2),m=s[0],d=s[1],u=(0,i.useState)(""),p=(0,t.Z)(u,2),v=p[0],_=p[1];return i.createElement("div",{className:"modal"},i.createElement("div",{className:"modal__inner"},i.createElement("form",{style:{border:"1px solid black",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",width:"400px",height:"400px",background:"#fff"},onSubmit:async function(e){e.preventDefault(),m?(0,r.f)(m,a):_("Please select file!")}},v&&i.createElement("p",null,v),i.createElement("h3",null,"avatar"===n?"Update Avatar!":"Upload Image!"),i.createElement("input",{type:"file",onChange:function(e){return n=(a=e.target.files)?a[0]:null,_(""),void(n?n.type.includes("image")?(_(""),d(n)):_("Please select image file"):_("Please select file!"));var a,n}}),c?i.createElement("textarea",{placeholder:"Your caption:",rows:3,onChange:function(e){return c(e.target.value.trim())}}):null,i.createElement("button",{type:"submit"},"avatar"===n?"Update Avatar!":"Upload Image!"),i.createElement("button",{type:"button",onClick:function(e){o(!1),d(null)}},"Close modal"))))}c()(l.Z,{insert:"head",singleton:!1}),l.Z.locals},5794:(e,a,n)=>{n.d(a,{$K:()=>m,Al:()=>w,BA:()=>k,Fe:()=>x,Fo:()=>d,Gm:()=>u,M:()=>h,Vv:()=>_,ah:()=>v,by:()=>b,dQ:()=>f,xD:()=>p});var t=n(4572),i=n(885),r=n(2982),o=n(4051),c=n(6147);function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){(0,t.Z)(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}async function m(e){return(await g("users","username",e)).docs.length>0}async function d(e,a){var n=(0,o.hJ)(c.db,"users"),t=(0,o.IO)(n,(0,o.ar)("username","==",e)),i=(0,o.IO)(t,(0,o.ar)("following","array-contains",a));return(await(0,o.PL)(i)).docs.length>0}async function u(e,a,n,t,i){t&&i&&(await async function(e,a,n){var t=(0,o.hJ)(c.db,"users"),i=(0,o.JU)(t,a),l=(await(0,o.QT)(i)).data().following;if(e){var s=l.filter((function(e){return e!=n}));(0,o.r7)(i,{following:s}).catch((function(e){return console.log(e)}))}else(0,o.r7)(i,{following:[].concat((0,r.Z)(l),[n])}).catch((function(e){return console.log(e)}))}(e,i,a),await async function(e,a,n){var t=(0,o.hJ)(c.db,"users"),i=(0,o.JU)(t,a),l=(await(0,o.QT)(i)).data().followers;if(e){var s=l.filter((function(e){return e!=n}));(0,o.r7)(i,{followers:s}).catch((function(e){return console.log(e)}))}else(0,o.r7)(i,{followers:[].concat((0,r.Z)(l),[n])}).catch((function(e){return console.log(e)}))}(e,n,t))}async function p(e){var a=(await g("users","userId",e)).docs.map((function(e){return s(s({},e.data()),{},{docId:e.id})}));return(0,i.Z)(a,1)[0]}async function v(){var e=(0,o.hJ)(c.db,"users");return(await(0,o.PL)(e)).docs.map((function(e){return e.data()}))}async function _(){var e=(0,o.hJ)(c.db,"photos");return(await(0,o.PL)(e)).docs.map((function(e){return e.data()}))}async function g(e,a,n){var t=(0,o.hJ)(c.db,e),i=(0,o.IO)(t,(0,o.ar)(a,"==",n));return await(0,o.PL)(i)}async function f(e){return(await g("users","username",e)).docs.map((function(e){return s(s({},e.data()),{},{docId:e.id})}))[0]}async function h(e){var a=(0,o.hJ)(c.db,"users"),n=(0,o.JU)(a);(0,o.pl)(n,e)}function b(e){switch(e.code){case"auth/email-already-in-use":return"The email address is already in use";case"auth/invalid-email":return"The email address is not valid.";case"auth/operation-not-allowed":return"Operation not allowed.";case"auth/weak-password":return"The password is too weak.";default:return e.message}}function x(e,a,n,t){var i=(0,o.hJ)(c.db,"photos"),r=(0,o.JU)(i),l={caption:t,comments:[],dateCreated:Date.now(),imageSrc:a,likes:[],imagePath:e,userId:n};(0,o.pl)(r,l)}async function k(e,a,n){if(n){var t=(0,o.hJ)(c.db,"users"),i=await f(n),r=(0,o.JU)(t,i.docId),l={avatarSrc:e,imagePath:a};await(0,o.r7)(r,{avatarData:l}).then().catch((function(e){console.log(e)}))}}async function w(e,a,n){if(n){var t=(0,o.hJ)(c.db,"users"),i=(0,o.JU)(t,n);(0,o.r7)(i,{username:e,fullName:a}).catch((function(e){return console.log(e)}))}}},807:(e,a,n)=>{n.d(a,{Z:()=>c,f:()=>o});var t=n(4444),i=n(6271),r=n(6147);function o(e,a){var n=(0,i.cF)(r.w),o=(0,t.k$)(),c="/images/".concat(o),l=(0,i.iH)(n,c);(0,i.KV)(l,e).then((function(){(0,i.Jt)(l).then((function(e){a(e,c)}))}))}function c(e){var a=(0,i.cF)(r.w),n=(0,i.iH)(a,e);(0,i.oq)(n).then().catch((function(e){return console.log(e)}))}},9080:(e,a,n)=>{n.d(a,{Z:()=>Y});var t=n(3645),i=n.n(t),r=n(1667),o=n.n(r),c=n(3677),l=n(8230),s=n(6071),m=n(8748),d=n(3114),u=n(921),p=n(3160),v=n(8250),_=n(7798),g=n(8683),f=n(3534),h=n(3233),b=n(973),x=n(1827),k=n(8897),w=n(8340),y=n(6325),E=i()((function(e){return e[1]})),N=o()(c),Z=o()(l),C=o()(s),O=o()(m),S=o()(d),P=o()(u),U=o()(p),J=o()(v),j=o()(_),I=o()(g),D=o()(f),T=o()(h),F=o()(b),z=o()(x),M=o()(k),A=o()(w),L=o()(y);E.push([e.id,".main-nav{position:fixed;left:0;width:245px;height:100vh;padding-top:8px;padding-right:12px;padding-bottom:20px;padding-left:12px;border-right:solid 1px rgb(var(--secondary-bg_700));transition:width .5s;z-index:1}@media screen and (max-width: 1263px){.main-nav{width:72px}.main-nav .main-nav__text,.main-nav .main-nav__image{display:none}.main-nav .main-nav__link{width:100%;height:100%;padding-left:12px}.main-nav .main-nav__link--active{border:solid 1px rgb(var(--secondary-bg_700))}.main-nav .main-nav__logo{display:block;width:47px;height:73px;padding:0;background-image:url("+N+");background-position:center;background-repeat:no-repeat}}@media screen and (max-width: 767px){.main-nav,.main-nav.main-nav--compact{bottom:0;width:100vw;height:49px;padding-top:4px;padding-bottom:4px;border-right:none;border-top:solid 1px rgb(var(--secondary-bg_700))}.main-nav .main-nav__logo,.main-nav.main-nav--compact .main-nav__logo{position:absolute;background-image:none;bottom:calc(100vh - 112px)}.main-nav .main-nav__image,.main-nav.main-nav--compact .main-nav__image{display:block}}.main-nav--compact{width:72px}.main-nav--compact .main-nav__text,.main-nav--compact .main-nav__image{display:none}.main-nav--compact .main-nav__link{width:100%;height:100%;padding-left:12px}.main-nav--compact .main-nav__link--active{border:solid 1px rgb(var(--secondary-bg_700))}.main-nav--compact .main-nav__logo{display:block;width:47px;height:73px;padding:0;background-image:url("+N+');background-position:center;background-repeat:no-repeat}.main-nav__inner{display:flex;flex-direction:column;list-style:none;height:calc(100% - 73px);padding-left:0;margin-top:0;margin-bottom:0}@media screen and (max-width: 767px){.main-nav__inner{flex-direction:row;justify-content:space-around;height:100%}}.main-nav__logo{display:flex;align-items:center;padding-top:28px;padding-right:12px;padding-bottom:16px;padding-left:12px;margin-bottom:20px}.main-nav__item{height:56px;padding-top:4px;padding-bottom:4px}@media screen and (max-width: 767px){.main-nav__item{width:40px;height:40px;padding:0}}@media screen and (max-width: 767px){.main-nav__item--search{position:absolute;bottom:calc(100vh - 47px);right:8px}}.main-nav__item--logout{margin-top:auto}.main-nav__link{display:block;position:relative;font-size:16px;line-height:24px;width:100%;padding-top:12px;padding-right:12px;padding-bottom:12px;padding-left:52px;border-radius:24px;transition:background-color .3s;text-decoration:none;overflow:hidden;color:rgb(var(--text-color_500));cursor:pointer}.main-nav__link:hover{background-color:rgb(var(--secondary-bg_400))}.main-nav__link:hover::before{transform:translateY(-50%) scale(105%)}.main-nav__link:active{opacity:.5}.main-nav__link::before{content:"";position:absolute;left:12px;top:50%;width:24px;height:24px;transform:translateY(-50%);background-position:center;background-repeat:no-repeat;transition:transform .2s cubic-bezier(0.17, 0.17, 0, 1)}@media screen and (max-width: 767px){.main-nav__link::before{left:7px}}.main-nav__link--active{font-weight:700}.main-nav__link--home::before{background-image:url('+Z+")}.main-nav__link--home.main-nav__link--active::before{background-image:url("+C+")}.main-nav__link--search::before{background-image:url("+O+")}.main-nav__link--search.main-nav__link--active::before{background-image:url("+S+")}.main-nav__link--explore::before{background-image:url("+P+")}.main-nav__link--explore.main-nav__link--active::before{background-image:url("+U+")}.main-nav__link--reels::before{background-image:url("+J+")}.main-nav__link--reels.main-nav__link--active::before{background-image:url("+j+")}.main-nav__link--messages::before{background-image:url("+I+")}.main-nav__link--messages.main-nav__link--active::before{background-image:url("+D+")}.main-nav__link--notifications::before{background-image:url("+T+")}.main-nav__link--notifications.main-nav__link--active::before{background-image:url("+F+")}.main-nav__link--create::before{background-image:url("+z+")}.main-nav__link--create.main-nav__link--active::before{background-image:url("+M+")}.main-nav__link--profile::before{background-image:url("+A+");background-size:contain}.main-nav__link--signout::before{background-image:url("+L+");background-size:contain}",""]);const Y=E},509:(e,a,n)=>{n.d(a,{Z:()=>r});var t=n(3645),i=n.n(t)()((function(e){return e[1]}));i.push([e.id,".modal{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0,0,0,.65);z-index:10}@media screen and (max-width: 767px){.modal{top:auto;bottom:0}}",""]);const r=i},2761:(e,a,n)=>{n.d(a,{Z:()=>r});var t=n(3645),i=n.n(t)()((function(e){return e[1]}));i.push([e.id,".search-block{position:relative;width:100%}.search-block__field{width:100%}.search-block__clean{position:absolute;line-height:16px;top:50%;right:8px;transform:translateY(-50%);border-radius:50%;border:solid 1px rgb(var(--secondary-bg_700));color:#fff;background-color:rgb(var(--secondary-bg_700));cursor:pointer}",""]);const r=i},3470:(e,a,n)=>{n.d(a,{Z:()=>r});var t=n(3645),i=n.n(t)()((function(e){return e[1]}));i.push([e.id,".search{position:fixed;height:100vh;top:0;left:73px;width:397px;box-shadow:4px 0 24px rgba(var(--secondary-bg_900), 0.15);border-top-right-radius:16px;border-bottom-right-radius:16px;border-right:1px solid rgb(var(--secondary-bg_700));background-color:var(--bg-color_100)}.search__header{padding-top:16px;padding-left:12px;padding-right:12px;padding-bottom:12px}.search__inner{border-top:1px solid rgb(var(--secondary-bg_700))}",""]);const r=i},3677:(e,a,n)=>{e.exports=n.p+"b18f9170ee55edf2565d.svg"},8897:(e,a,n)=>{e.exports=n.p+"562e4778f0c292857f46.svg"},1827:(e,a,n)=>{e.exports=n.p+"e83933491cce0cf3ec46.svg"},3160:(e,a,n)=>{e.exports=n.p+"6a56259b023286ab3246.svg"},921:(e,a,n)=>{e.exports=n.p+"c28c50b644cedb13ce97.svg"},6071:(e,a,n)=>{e.exports=n.p+"3695dd2ddbb68b56e082.svg"},8230:(e,a,n)=>{e.exports=n.p+"da9dcfe9fdf589cab5e7.svg"},6325:(e,a,n)=>{e.exports=n.p+"8d64f08d24c368f2fda6.svg"},3534:(e,a,n)=>{e.exports=n.p+"5fc441aea05dd265a7ac.svg"},8683:(e,a,n)=>{e.exports=n.p+"2b3b7a64875df59f8b40.svg"},973:(e,a,n)=>{e.exports=n.p+"91aa5f57471afd4fd14c.svg"},3233:(e,a,n)=>{e.exports=n.p+"3187b96a84b1bd4c3d40.svg"},8340:(e,a,n)=>{e.exports=n.p+"7fe14f0accd9979e3303.jpg"},7798:(e,a,n)=>{e.exports=n.p+"2bf7d45c49bd4ac584ec.svg"},8250:(e,a,n)=>{e.exports=n.p+"d94687e744a34dbcb39b.svg"},3114:(e,a,n)=>{e.exports=n.p+"625dbab8d665c15f79c0.svg"},8748:(e,a,n)=>{e.exports=n.p+"06c690a97bac6156d427.svg"}}]);